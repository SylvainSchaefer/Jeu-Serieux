@startuml
'https://plantuml.com/class-diagram
skinparam classAttributeIconSize 0
skinparam classFontStyle Bold
skinparam style strictuml
hide empty members

class Main{
    +main(args : String){static}
}

package models
{
    class Plateau
    {
        -nomJoueur : String
        -meilleurScore : Integer
        +createPartie(nbManches: Integer, nbPionsDispo: Integer, nbPionsCombinaison: Integer, nbTentatives: Integer): Partie
        +setJoueur(nom: String)
        +addObserver(mastermindObserver: MastermindObserver)
        -notifyObserversInit(nbTentatives: Integer, nbPionsCombi: Integer)
    }


    class Partie
    {
        - nbManches: Integer
        - nbPionsDispo: Integer
        - nbPionsCombinaison: Integer
        - nbTentatives: Integer
        - score: Integer
        + <<create>> Partie(observers: MastermindObserver[*], nbManches: Integer, nbPionsDispo: Integer, nbPionsCombinaison: Integer, nbTentatives: Integer)
        + createManche(): Manche
        + upgradeScore(nb: Integer)
        + getScore(): Integer
        - notifyObserversShowAvaibleColors()
    }


    class Manche
    {
        - nbTentativesMax: Integer
        - tailleCombinaison: Integer
        - nbPionsDispo: Integer
        - isFinished: Boolean
        - score: Integer

        + <<create>> Manche(nbPionsDispo: Integer, tailleCombinaison: Integer, nombreTentatives: Integer, obervers: MastermindObserver[*])
        + createTentative(i: Integer): Tentative
        + getTentativeActuelle(): Tentative
        + getCombinaisonSecrete(): Combinaison
        + verifierCombinaisonIndices()
        + couleurDansCombinaison(combinaisonSecrete: CouleurPion[], couleur: CouleurPion): Boolean
        + isFinished(): Boolean
        + upgradeScore()
        + getScore(): Integer
        - notifyObserversStartTentative(nbPionsCombi: Integer)
        - notifyObserversUpdateIndice(indices: Indices[])
    }

    class Tentative
    {
        +<<create>>Tentative(tailleCombinaison : Integer)
        + setTentative(tentative: Indice[])
        + getCombinaison(): Combinaison
        + getIndices(): Indice[]
        + setIndicesCouleurs(indice: Indice, index: Integer)
    }

    class Combinaison
    {
        +<<create>>Combinaison(tailleCombinaison : Integer)
        +getCombinaison() : CouleurPion[*]
        +genererCombinaisonAleatoire(dispoPions : Integer)
    }


    interface mastermindObserver <<interface>>
    {
        {abstract} + init(nbTentatives: Integer, nbPionsCombinaison: Integer)
        {abstract} + showAvaibleColors(couleursDispo: Couleurs[])
        {abstract} + startTentative(nbPionsCombi: Integer)
        {abstract} + updateIndice(indices: Indices[])
    }

    enum CouleurPion <<enumeration>>
    {
        +ROUGE
        +JAUNE
        +VERT
        +BLEU
        +VIOLET
        +ORANGE
        +NOIR
        +BLANC
    }

    enum Indice <<enumeration>>{
        +BIENPLACE
        +MALPLACE
        +VIDE
    }

}



package views
{
    class ViewStart
    {
        + <<create>> ViewStart(controller: GameController)
        + setParameters()
    }


    class ViewGame implements mastermindObserver
    {
        - indiceType: Integer
        + init(nbTentatives: Integer, nbPionsCombinaison: Integer)
        + showAvaibleColors(couleursDispo: CouleurPion[])
        + startTentative(nbPionsCombi: Integer)
        + updateIndice(indices: Indice[])
        +setAffichageIndiceFacile()
        +setAffichageIndiceNumerique()
        +setAffichageClassique()
    }


    class ViewEnd
    {

    }
}


package controller
{
    class GameController
    {
        - nbManches: Integer
        - nbPionsDispo: Integer
        - nbPionsCombinaison: Integer
        - nbTentatives: Integer
        - tentativeValidee: Boolean
        - manchesCount: Integer
        - tentativesCount: Integer
        + <<create>> GameController(plateau: Plateau)
        + gameStart()
        + createPartie(nbManches: Integer, nbPionsDispo: Integer, nbPionsCombinaison: Integer, nbTentatives: Integer)
        + validerTentative(tentative: CouleurPion[])
    }
}


Plateau ..>Partie : <<use>>
Plateau "*" o--> "*\n-listeObservers" mastermindObserver: observe <
Partie *---> "*\n -manche" Manche : Crée >

Partie "*" o--> "*\n-listeObservers" mastermindObserver: observe <
Manche "*" o--> "*\n-listeObservers" mastermindObserver: observe <
Manche *--> Tentative : Crée

Tentative *--->"4..6 \n-indices" Indice : Possède >


ViewGame o-up-> "1\n -controller" GameController
ViewEnd o-up-> "1\n -controller" GameController
ViewStart o-up-> "1\n -controller" GameController


GameController o-left-> "1\n manipule" Partie
GameController o-left-> "1\n manipule" Plateau
GameController o-left-> "1\n manipule" Manche
GameController o-left-> "1\n manipule" Tentative

Main ..> Plateau : <<use>>
Main ..> GameController : <<use>>
Main ..> ViewGame : <<use>>
Main ..> ViewStart : <<use>>

Manche *--> "1\n -combiSecrete" Combinaison
Tentative *--> "1\n -combiJoueur" Combinaison
Combinaison *--> "4..6\n possède" CouleurPion


@enduml
